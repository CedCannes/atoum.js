{"files":[{"filename":"lib/asserter/exception.js","coverage":88.88888888888889,"hits":8,"misses":1,"sloc":9,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var util = require(\"util\"),","coverage":1},"4":{"line":"    exception = module.exports = function exception(message, asserter) {","coverage":""},"5":{"line":"        var error = new Error(),","coverage":26},"6":{"line":"            stack = error.stack.split(\"\\n\");","coverage":""},"7":{"line":"","coverage":""},"8":{"line":"        this.message = message;","coverage":26},"9":{"line":"        this.name = \"Failure\";","coverage":26},"10":{"line":"        this.stack = stack.slice(3).join(\"\\n\");","coverage":26},"11":{"line":"        this.asserter = asserter;","coverage":26},"12":{"line":"    };","coverage":""},"13":{"line":"","coverage":""},"14":{"line":"exception.prototype.constructor = exception;","coverage":1},"15":{"line":"exception.prototype = {","coverage":1},"16":{"line":"    toString: function () {","coverage":""},"17":{"line":"        return util.format(\"%s\\n%s\", this.message, this.stack);","coverage":0},"18":{"line":"    }","coverage":""},"19":{"line":"};","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/asserter/generator.js","coverage":46.875,"hits":15,"misses":17,"sloc":32,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var fs = require(\"fs\"),","coverage":1},"4":{"line":"    path = require(\"path\"),","coverage":""},"5":{"line":"    underscore = require(\"underscore\"),","coverage":""},"6":{"line":"    skipped = require(\"../test/method/exception\"),","coverage":""},"7":{"line":"    asserters = path.resolve(path.dirname(module.filename), \"..\", \"asserters\"),","coverage":""},"8":{"line":"    generator = module.exports = function generator() {","coverage":""},"9":{"line":"        this.reset();","coverage":1},"10":{"line":"    };","coverage":""},"11":{"line":"","coverage":""},"12":{"line":"generator.prototype = {","coverage":1},"13":{"line":"    reset: function () {","coverage":""},"14":{"line":"        this.assertionsCount = 0;","coverage":1},"15":{"line":"        this.asserters = {};","coverage":1},"16":{"line":"        this.aliases = {};","coverage":1},"17":{"line":"        this","coverage":1},"18":{"line":"            .addAlias(\"if\", function () { return this; })","coverage":0},"19":{"line":"            .addAlias(\"and\", function () { return this; })","coverage":0},"20":{"line":"            .addAlias(\"then\", function () { return this; })","coverage":0},"21":{"line":"            .addAlias(\"dump\", function (value) { require(\"console\").dir(value); return this; })","coverage":0},"22":{"line":"            .addAlias(\"skip\", function (message, callback) {","coverage":""},"23":{"line":"                if(callback() === true) {","coverage":0},"24":{"line":"                    throw new skipped(message);","coverage":0},"25":{"line":"                }","coverage":""},"26":{"line":"","coverage":""},"27":{"line":"                return this;","coverage":0},"28":{"line":"            })","coverage":""},"29":{"line":"        ;","coverage":""},"30":{"line":"","coverage":""},"31":{"line":"        underscore.each(","coverage":1},"32":{"line":"            fs.readdirSync(asserters),","coverage":""},"33":{"line":"            function (value) {","coverage":""},"34":{"line":"                var filepath = fs.realpathSync(path.resolve(asserters, value));","coverage":9},"35":{"line":"","coverage":""},"36":{"line":"                this.addAsserter(value.replace(\".js\", \"\"), require(filepath));","coverage":9},"37":{"line":"            },","coverage":""},"38":{"line":"            this","coverage":""},"39":{"line":"        );","coverage":""},"40":{"line":"","coverage":""},"41":{"line":"        return this;","coverage":1},"42":{"line":"    },","coverage":""},"43":{"line":"","coverage":""},"44":{"line":"    addAsserter: function (name, constructor) {","coverage":""},"45":{"line":"        this.asserters[name] = constructor;","coverage":9},"46":{"line":"","coverage":""},"47":{"line":"        return this;","coverage":9},"48":{"line":"    },","coverage":""},"49":{"line":"","coverage":""},"50":{"line":"    addAlias: function (name, callable) {","coverage":""},"51":{"line":"        this.aliases[name] = callable;","coverage":5},"52":{"line":"","coverage":""},"53":{"line":"        return this;","coverage":5},"54":{"line":"    },","coverage":""},"55":{"line":"","coverage":""},"56":{"line":"    injectInto: function (target) {","coverage":""},"57":{"line":"        underscore.each(","coverage":0},"58":{"line":"            this.asserters,","coverage":""},"59":{"line":"            function (value, key) {","coverage":""},"60":{"line":"                target[key] = this.getAsserter(key);","coverage":0},"61":{"line":"            },","coverage":""},"62":{"line":"            this","coverage":""},"63":{"line":"        );","coverage":""},"64":{"line":"","coverage":""},"65":{"line":"        underscore.each(","coverage":0},"66":{"line":"            this.aliases,","coverage":""},"67":{"line":"            function (value, key) {","coverage":""},"68":{"line":"                target[key] = value;","coverage":0},"69":{"line":"            },","coverage":""},"70":{"line":"            this","coverage":""},"71":{"line":"        );","coverage":""},"72":{"line":"","coverage":""},"73":{"line":"        return target;","coverage":0},"74":{"line":"    },","coverage":""},"75":{"line":"","coverage":""},"76":{"line":"    getAsserter: function (name) {","coverage":""},"77":{"line":"        var generator = this;","coverage":0},"78":{"line":"","coverage":""},"79":{"line":"        return function (value) {","coverage":0},"80":{"line":"            var asserter = new generator.asserters[name](generator);","coverage":0},"81":{"line":"","coverage":""},"82":{"line":"            generator.assertionsCount += 1;","coverage":0},"83":{"line":"","coverage":""},"84":{"line":"            return generator.injectInto(asserter).setWith(value);","coverage":0},"85":{"line":"        };","coverage":""},"86":{"line":"    }","coverage":""},"87":{"line":"};","coverage":""},"88":{"line":"","coverage":""}}},{"filename":"lib/test/method/exception.js","coverage":83.33333333333334,"hits":5,"misses":1,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var util = require(\"util\"),","coverage":1},"4":{"line":"    exception = module.exports = function exception(message) {","coverage":""},"5":{"line":"        this.message = message;","coverage":1},"6":{"line":"        this.name = \"Skipped\";","coverage":1},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"exception.prototype.constructor = exception;","coverage":1},"10":{"line":"exception.prototype = {","coverage":1},"11":{"line":"    toString: function () {","coverage":""},"12":{"line":"        return util.format(\"%s: %s\", this.name, this.message);","coverage":0},"13":{"line":"    }","coverage":""},"14":{"line":"};","coverage":""},"15":{"line":"","coverage":""}}},{"filename":"lib/asserters/array.js","coverage":22.727272727272727,"hits":5,"misses":17,"sloc":22,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    variable = require(\"./variable\"),","coverage":""},"5":{"line":"    array = module.exports = function array(generator) {","coverage":""},"6":{"line":"        variable.call(this, generator);","coverage":7},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"array.prototype = new variable();","coverage":1},"10":{"line":"array.prototype.constructor = array;","coverage":1},"11":{"line":"array.prototype = extend(","coverage":1},"12":{"line":"    array.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        check: function () {","coverage":""},"15":{"line":"            if(Object.prototype.toString.call(this.value) !== \"[object Array]\") {","coverage":0},"16":{"line":"                this.fail(\"%s is not an array\", this.value);","coverage":0},"17":{"line":"            }","coverage":""},"18":{"line":"","coverage":""},"19":{"line":"            return this;","coverage":0},"20":{"line":"        },","coverage":""},"21":{"line":"","coverage":""},"22":{"line":"        hasLength: function (expected) {","coverage":""},"23":{"line":"            this.generator.assertionsCount += 1;","coverage":0},"24":{"line":"","coverage":""},"25":{"line":"            if(this.value.length !== expected) {","coverage":0},"26":{"line":"                this.fail(\"Array(%d) has not length %d\", this.value.length, expected);","coverage":0},"27":{"line":"            }","coverage":""},"28":{"line":"","coverage":""},"29":{"line":"            return this;","coverage":0},"30":{"line":"        },","coverage":""},"31":{"line":"","coverage":""},"32":{"line":"        isEqualTo: function(expected) {","coverage":""},"33":{"line":"            var i;","coverage":0},"34":{"line":"","coverage":""},"35":{"line":"            this.generator.assertionsCount += 1;","coverage":0},"36":{"line":"","coverage":""},"37":{"line":"            for(i = 0; i < expected.length; i += 1) {","coverage":0},"38":{"line":"                if(this.value[i] != expected[i]) {","coverage":0},"39":{"line":"                    this.fail(\"%s is not equal to %s\", this.value, expected);","coverage":0},"40":{"line":"                }","coverage":""},"41":{"line":"            }","coverage":""},"42":{"line":"","coverage":""},"43":{"line":"            return this;","coverage":0},"44":{"line":"        },","coverage":""},"45":{"line":"","coverage":""},"46":{"line":"        isNotEqualTo: function(expected) {","coverage":""},"47":{"line":"            this.generator.assertionsCount += 1;","coverage":0},"48":{"line":"","coverage":""},"49":{"line":"            try {","coverage":0},"50":{"line":"                this.isEqualTo(expected);","coverage":0},"51":{"line":"","coverage":""},"52":{"line":"                this.fail(\"%s is equal to %s\", this.value, expected);","coverage":0},"53":{"line":"            } catch(exception) { }","coverage":""},"54":{"line":"        }","coverage":""},"55":{"line":"    }","coverage":""},"56":{"line":");","coverage":""},"57":{"line":"","coverage":""}}},{"filename":"lib/asserters/variable.js","coverage":80.95238095238095,"hits":34,"misses":8,"sloc":42,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    asserter = require(\"../asserter\"),","coverage":""},"5":{"line":"    variable = module.exports = function variable(generator) {","coverage":""},"6":{"line":"        asserter.call(this, generator);","coverage":9},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"variable.prototype = new asserter();","coverage":1},"10":{"line":"variable.prototype.constructor = variable;","coverage":1},"11":{"line":"variable.prototype = extend(","coverage":1},"12":{"line":"    variable.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        setWith: function (value) {","coverage":""},"15":{"line":"            this.value = value;","coverage":23},"16":{"line":"","coverage":""},"17":{"line":"            return this.check();","coverage":23},"18":{"line":"        },","coverage":""},"19":{"line":"","coverage":""},"20":{"line":"        check: function () {","coverage":""},"21":{"line":"            if(typeof this.value === \"undefined\") {","coverage":23},"22":{"line":"                this.fail(\"Value is undefined\");","coverage":1},"23":{"line":"            }","coverage":""},"24":{"line":"","coverage":""},"25":{"line":"            return this;","coverage":22},"26":{"line":"        },","coverage":""},"27":{"line":"","coverage":""},"28":{"line":"        isEqualTo: function (expected) {","coverage":""},"29":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"30":{"line":"","coverage":""},"31":{"line":"            if(this.value != expected) {","coverage":2},"32":{"line":"                this.fail(\"%s is not equal to %s\", this.value, expected);","coverage":1},"33":{"line":"            }","coverage":""},"34":{"line":"","coverage":""},"35":{"line":"            return this;","coverage":1},"36":{"line":"        },","coverage":""},"37":{"line":"","coverage":""},"38":{"line":"        isNotEqualTo: function (expected) {","coverage":""},"39":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"40":{"line":"","coverage":""},"41":{"line":"            if(this.value == expected) {","coverage":2},"42":{"line":"                this.fail(\"%s is equal to %s\", this.value, expected);","coverage":1},"43":{"line":"            }","coverage":""},"44":{"line":"","coverage":""},"45":{"line":"            return this;","coverage":1},"46":{"line":"        },","coverage":""},"47":{"line":"","coverage":""},"48":{"line":"        isIdenticalTo: function (expected) {","coverage":""},"49":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"50":{"line":"","coverage":""},"51":{"line":"            if(this.value !== expected) {","coverage":2},"52":{"line":"                this.fail(\"%s is not identical to %s\", this.value, expected);","coverage":1},"53":{"line":"            }","coverage":""},"54":{"line":"","coverage":""},"55":{"line":"            return this;","coverage":1},"56":{"line":"        },","coverage":""},"57":{"line":"","coverage":""},"58":{"line":"        isNotIdenticalTo: function (expected) {","coverage":""},"59":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"60":{"line":"","coverage":""},"61":{"line":"            if(this.value === expected) {","coverage":2},"62":{"line":"                this.fail(\"%s is identical to %s\", this.value, expected);","coverage":1},"63":{"line":"            }","coverage":""},"64":{"line":"","coverage":""},"65":{"line":"            return this;","coverage":1},"66":{"line":"        },","coverage":""},"67":{"line":"","coverage":""},"68":{"line":"        isTruthy: function () {","coverage":""},"69":{"line":"            this.generator.assertionsCount += 1;","coverage":6},"70":{"line":"","coverage":""},"71":{"line":"            if(this.value == false) {","coverage":6},"72":{"line":"                this.fail(\"%s is not true\", this.value);","coverage":1},"73":{"line":"            }","coverage":""},"74":{"line":"","coverage":""},"75":{"line":"            return this;","coverage":5},"76":{"line":"        },","coverage":""},"77":{"line":"","coverage":""},"78":{"line":"        isFalsy: function () {","coverage":""},"79":{"line":"            this.generator.assertionsCount += 1;","coverage":9},"80":{"line":"","coverage":""},"81":{"line":"            if(this.value == true) {","coverage":9},"82":{"line":"                this.fail(\"%s is not false\", this.value);","coverage":1},"83":{"line":"            }","coverage":""},"84":{"line":"","coverage":""},"85":{"line":"            return this;","coverage":8},"86":{"line":"        },","coverage":""},"87":{"line":"","coverage":""},"88":{"line":"        isEmpty: function () {","coverage":""},"89":{"line":"            this.generator.assertionsCount += 1;","coverage":0},"90":{"line":"","coverage":""},"91":{"line":"            if(this.length > 0) {","coverage":0},"92":{"line":"                this.fail(\"%s is not empty\", this.value);","coverage":0},"93":{"line":"            }","coverage":""},"94":{"line":"","coverage":""},"95":{"line":"            return this;","coverage":0},"96":{"line":"        },","coverage":""},"97":{"line":"","coverage":""},"98":{"line":"        isNotEmpty: function () {","coverage":""},"99":{"line":"            this.generator.assertionsCount += 1;","coverage":0},"100":{"line":"","coverage":""},"101":{"line":"            if(this.length === 0) {","coverage":0},"102":{"line":"                this.fail(\"%s is empty\", this.value);","coverage":0},"103":{"line":"            }","coverage":""},"104":{"line":"","coverage":""},"105":{"line":"            return this;","coverage":0},"106":{"line":"        }","coverage":""},"107":{"line":"    }","coverage":""},"108":{"line":");","coverage":""},"109":{"line":"","coverage":""}}},{"filename":"lib/asserter.js","coverage":100,"hits":7,"misses":0,"sloc":7,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var util = require(\"util\"),","coverage":1},"4":{"line":"    underscore = require(\"underscore\"),","coverage":""},"5":{"line":"    exception = require(\"./asserter/exception\"),","coverage":""},"6":{"line":"    asserter = module.exports = function asserter(generator) {","coverage":""},"7":{"line":"        this.generator = generator;","coverage":10},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"asserter.prototype = {","coverage":1},"11":{"line":"    fail: function (message) {","coverage":""},"12":{"line":"        var args = Array.prototype.slice.call(arguments, 1);","coverage":8},"13":{"line":"","coverage":""},"14":{"line":"        underscore.map(","coverage":8},"15":{"line":"            args,","coverage":""},"16":{"line":"            function (arg) {","coverage":""},"17":{"line":"                return util.inspect(arg);","coverage":10},"18":{"line":"            }","coverage":""},"19":{"line":"        );","coverage":""},"20":{"line":"","coverage":""},"21":{"line":"        throw new exception(util.format.apply(util, [ message ].concat(args)), this);","coverage":8},"22":{"line":"    }","coverage":""},"23":{"line":"};","coverage":""},"24":{"line":"","coverage":""}}},{"filename":"lib/asserters/bool.js","coverage":90,"hits":9,"misses":1,"sloc":10,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    variable = require(\"./variable\"),","coverage":""},"5":{"line":"    bool = module.exports = function bool(generator) {","coverage":""},"6":{"line":"        variable.call(this, generator);","coverage":3},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"bool.prototype = new variable();","coverage":1},"10":{"line":"bool.prototype.constructor = bool;","coverage":1},"11":{"line":"bool.prototype = extend(","coverage":1},"12":{"line":"    bool.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        check: function () {","coverage":""},"15":{"line":"            if(typeof this.value !== \"boolean\") {","coverage":5},"16":{"line":"                this.fail(\"%s is not a boolean\", this.value);","coverage":2},"17":{"line":"            }","coverage":""},"18":{"line":"","coverage":""},"19":{"line":"            return this;","coverage":3},"20":{"line":"        },","coverage":""},"21":{"line":"","coverage":""},"22":{"line":"        isTrue: function () {","coverage":""},"23":{"line":"            return this.isIdenticalTo(true);","coverage":2},"24":{"line":"        },","coverage":""},"25":{"line":"","coverage":""},"26":{"line":"        isFalse: function () {","coverage":""},"27":{"line":"            return this.isIdenticalTo(false);","coverage":0},"28":{"line":"        }","coverage":""},"29":{"line":"    }","coverage":""},"30":{"line":");","coverage":""},"31":{"line":"","coverage":""}}},{"filename":"lib/asserters/callback.js","coverage":95.55555555555556,"hits":43,"misses":2,"sloc":45,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    underscore = require(\"underscore\"),","coverage":""},"5":{"line":"    asserter = require(\"../asserter\"),","coverage":""},"6":{"line":"    callback = module.exports = function callback(generator) {","coverage":""},"7":{"line":"        asserter.call(this, generator);","coverage":6},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"callback.prototype = new asserter();","coverage":1},"11":{"line":"callback.prototype.constructor = callback;","coverage":1},"12":{"line":"callback.prototype = extend(","coverage":1},"13":{"line":"    callback.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        setWith: function (value) {","coverage":""},"16":{"line":"            this.value = value;","coverage":8},"17":{"line":"","coverage":""},"18":{"line":"            return this.check();","coverage":8},"19":{"line":"        },","coverage":""},"20":{"line":"","coverage":""},"21":{"line":"        check: function () {","coverage":""},"22":{"line":"            if(typeof this.value !== \"function\") {","coverage":8},"23":{"line":"                this.fail(\"%s is not a callback\", this.value);","coverage":2},"24":{"line":"            }","coverage":""},"25":{"line":"","coverage":""},"26":{"line":"            return this;","coverage":6},"27":{"line":"        },","coverage":""},"28":{"line":"","coverage":""},"29":{"line":"        wasCalled: function () {","coverage":""},"30":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"31":{"line":"","coverage":""},"32":{"line":"            if(this.value.controller.args.length === 0) {","coverage":2},"33":{"line":"                this.fail(\"Callback was not called\");","coverage":1},"34":{"line":"            }","coverage":""},"35":{"line":"","coverage":""},"36":{"line":"            return this;","coverage":1},"37":{"line":"        },","coverage":""},"38":{"line":"","coverage":""},"39":{"line":"        wasNotCalled: function () {","coverage":""},"40":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"41":{"line":"","coverage":""},"42":{"line":"            if(this.value.controller.args.length > 0) {","coverage":2},"43":{"line":"                this.fail(\"Callback was called\");","coverage":1},"44":{"line":"            }","coverage":""},"45":{"line":"","coverage":""},"46":{"line":"            return this;","coverage":1},"47":{"line":"        },","coverage":""},"48":{"line":"","coverage":""},"49":{"line":"        withoutArgument: function () {","coverage":""},"50":{"line":"            var actual = this.value.controller.args,","coverage":2},"51":{"line":"                found = false;","coverage":""},"52":{"line":"","coverage":""},"53":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"54":{"line":"","coverage":""},"55":{"line":"            underscore.each(","coverage":2},"56":{"line":"                actual,","coverage":""},"57":{"line":"                function(value) {","coverage":""},"58":{"line":"                    if(value.length > 0) {","coverage":3},"59":{"line":"                        return;","coverage":2},"60":{"line":"                    }","coverage":""},"61":{"line":"","coverage":""},"62":{"line":"                    found = true;","coverage":1},"63":{"line":"                }","coverage":""},"64":{"line":"            );","coverage":""},"65":{"line":"","coverage":""},"66":{"line":"            if(found === false) {","coverage":2},"67":{"line":"                this.fail(\"Callback was not called without argument: %s\", actual);","coverage":1},"68":{"line":"            }","coverage":""},"69":{"line":"","coverage":""},"70":{"line":"            return this;","coverage":1},"71":{"line":"        },","coverage":""},"72":{"line":"","coverage":""},"73":{"line":"        withArguments: function (expected) {","coverage":""},"74":{"line":"            var actual = this.value.controller.args,","coverage":5},"75":{"line":"                found = false;","coverage":""},"76":{"line":"","coverage":""},"77":{"line":"            if(arguments.length === 1) {","coverage":5},"78":{"line":"                if(Object.prototype.toString.call(expected) !== \"[object Array]\") {","coverage":3},"79":{"line":"                    expected = [ expected ];","coverage":0},"80":{"line":"                }","coverage":""},"81":{"line":"            } else if(arguments.length > 1) {","coverage":2},"82":{"line":"                expected = underscore.values(arguments);","coverage":2},"83":{"line":"            }","coverage":""},"84":{"line":"","coverage":""},"85":{"line":"            this.generator.assertionsCount += 1;","coverage":5},"86":{"line":"","coverage":""},"87":{"line":"            underscore.each(","coverage":5},"88":{"line":"                actual,","coverage":""},"89":{"line":"                function(value) {","coverage":""},"90":{"line":"                    var i;","coverage":7},"91":{"line":"","coverage":""},"92":{"line":"                    if(value.length !== expected.length) {","coverage":7},"93":{"line":"                        return;","coverage":0},"94":{"line":"                    }","coverage":""},"95":{"line":"","coverage":""},"96":{"line":"                    for(i = 0; i < value.length; i += 1) {","coverage":7},"97":{"line":"                        if(value[i] != expected[i]) {","coverage":11},"98":{"line":"                            return;","coverage":3},"99":{"line":"                        }","coverage":""},"100":{"line":"                    }","coverage":""},"101":{"line":"","coverage":""},"102":{"line":"                    found = true;","coverage":4},"103":{"line":"                }","coverage":""},"104":{"line":"            );","coverage":""},"105":{"line":"","coverage":""},"106":{"line":"            if(found === false) {","coverage":5},"107":{"line":"                this.fail(\"Callback was not called with arguments %s: %s\", expected, actual);","coverage":1},"108":{"line":"            }","coverage":""},"109":{"line":"","coverage":""},"110":{"line":"            return this;","coverage":4},"111":{"line":"        }","coverage":""},"112":{"line":"    }","coverage":""},"113":{"line":");","coverage":""},"114":{"line":"","coverage":""}}},{"filename":"lib/asserters/error.js","coverage":100,"hits":20,"misses":0,"sloc":20,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    variable = require(\"./variable\"),","coverage":""},"5":{"line":"    error = module.exports = function error(generator) {","coverage":""},"6":{"line":"        variable.call(this, generator);","coverage":4},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"error.prototype = new variable();","coverage":1},"10":{"line":"error.prototype.constructor = error;","coverage":1},"11":{"line":"error.prototype = extend(","coverage":1},"12":{"line":"    error.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        check: function () {","coverage":""},"15":{"line":"            if(typeof this.value !== \"function\") {","coverage":5},"16":{"line":"                this.fail(\"%s is not callable\", this.value);","coverage":1},"17":{"line":"            }","coverage":""},"18":{"line":"","coverage":""},"19":{"line":"            try {","coverage":4},"20":{"line":"                this.value();","coverage":4},"21":{"line":"","coverage":""},"22":{"line":"                this.fail(\"There was no error\");","coverage":1},"23":{"line":"            } catch(error) {","coverage":""},"24":{"line":"                this.exception = error;","coverage":4},"25":{"line":"            }","coverage":""},"26":{"line":"","coverage":""},"27":{"line":"            return this;","coverage":4},"28":{"line":"        },","coverage":""},"29":{"line":"","coverage":""},"30":{"line":"        hasName: function (expected) {","coverage":""},"31":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"32":{"line":"","coverage":""},"33":{"line":"            if(expected !== this.exception.name) {","coverage":2},"34":{"line":"                this.fail(\"Error name '%s' is not equal to '%s'\", this.exception.name, expected);","coverage":1},"35":{"line":"            }","coverage":""},"36":{"line":"","coverage":""},"37":{"line":"            return this;","coverage":1},"38":{"line":"        },","coverage":""},"39":{"line":"","coverage":""},"40":{"line":"        hasMessage: function (expected) {","coverage":""},"41":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"42":{"line":"","coverage":""},"43":{"line":"            if(expected !== this.exception.message) {","coverage":2},"44":{"line":"                this.fail(\"Error message '%s' is not equal to '%s'\", this.exception.message, expected);","coverage":1},"45":{"line":"            }","coverage":""},"46":{"line":"","coverage":""},"47":{"line":"            return this;","coverage":1},"48":{"line":"        }","coverage":""},"49":{"line":"    }","coverage":""},"50":{"line":");","coverage":""},"51":{"line":"","coverage":""}}},{"filename":"lib/asserters/number.js","coverage":100,"hits":8,"misses":0,"sloc":8,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    variable = require(\"./variable\"),","coverage":""},"5":{"line":"    number = module.exports = function number(generator) {","coverage":""},"6":{"line":"        variable.call(this, generator);","coverage":2},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"number.prototype = new variable();","coverage":1},"10":{"line":"number.prototype.constructor = number;","coverage":1},"11":{"line":"number.prototype = extend(","coverage":1},"12":{"line":"    number.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        check: function () {","coverage":""},"15":{"line":"            if(typeof this.value !== \"number\") {","coverage":4},"16":{"line":"                this.fail(\"%s is not a number\", this.value);","coverage":2},"17":{"line":"            }","coverage":""},"18":{"line":"","coverage":""},"19":{"line":"            return this;","coverage":2},"20":{"line":"        }","coverage":""},"21":{"line":"    }","coverage":""},"22":{"line":");","coverage":""},"23":{"line":"","coverage":""}}},{"filename":"lib/asserters/object.js","coverage":80.95238095238095,"hits":17,"misses":4,"sloc":21,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    array = require(\"./array\"),","coverage":""},"5":{"line":"    object = module.exports = function object(generator) {","coverage":""},"6":{"line":"        array.call(this, generator);","coverage":6},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"object.prototype = new array();","coverage":1},"10":{"line":"object.prototype.constructor = object;","coverage":1},"11":{"line":"object.prototype = extend(","coverage":1},"12":{"line":"    object.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        check: function () {","coverage":""},"15":{"line":"            var type = Object.prototype.toString.call(this.value);","coverage":7},"16":{"line":"","coverage":""},"17":{"line":"            if(typeof this.value !== \"object\" || type === \"[object Array]\") {","coverage":7},"18":{"line":"                this.fail(\"%s is not an object\", this.value);","coverage":2},"19":{"line":"            }","coverage":""},"20":{"line":"","coverage":""},"21":{"line":"            return this;","coverage":5},"22":{"line":"        },","coverage":""},"23":{"line":"","coverage":""},"24":{"line":"        isInstanceOf: function (expected) {","coverage":""},"25":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"26":{"line":"","coverage":""},"27":{"line":"            if(false === (this.value instanceof expected)) {","coverage":2},"28":{"line":"                this.fail(\"[object %s] is not an instance of %s\", this.value.constructor.name, expected.name);","coverage":1},"29":{"line":"            }","coverage":""},"30":{"line":"","coverage":""},"31":{"line":"            return this;","coverage":1},"32":{"line":"        },","coverage":""},"33":{"line":"","coverage":""},"34":{"line":"        isNotInstanceOf: function (expected) {","coverage":""},"35":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"36":{"line":"","coverage":""},"37":{"line":"            if(this.value instanceof expected) {","coverage":2},"38":{"line":"                this.fail(\"[object %s] is an instance of %s\", this.value.constructor.name, expected.name);","coverage":1},"39":{"line":"            }","coverage":""},"40":{"line":"","coverage":""},"41":{"line":"            return this;","coverage":1},"42":{"line":"        },","coverage":""},"43":{"line":"","coverage":""},"44":{"line":"        hasMember: function (expected) {","coverage":""},"45":{"line":"            this.generator.assertionsCount += 1;","coverage":0},"46":{"line":"","coverage":""},"47":{"line":"            if(false === this.value.hasOwnProperty(expected)) {","coverage":0},"48":{"line":"                this.fail(\"Value does not have member %s\", expected);","coverage":0},"49":{"line":"            }","coverage":""},"50":{"line":"","coverage":""},"51":{"line":"            return this;","coverage":0},"52":{"line":"        }","coverage":""},"53":{"line":"    }","coverage":""},"54":{"line":");","coverage":""},"55":{"line":"","coverage":""}}},{"filename":"lib/asserters/string.js","coverage":91.66666666666666,"hits":22,"misses":2,"sloc":24,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var util = require(\"util\"),","coverage":1},"4":{"line":"    underscore = require(\"underscore\"),","coverage":""},"5":{"line":"    extend = require(\"node.extend\"),","coverage":""},"6":{"line":"    variable = require(\"./variable\"),","coverage":""},"7":{"line":"    exception = require(\"../asserter/string/exception\"),","coverage":""},"8":{"line":"    string = module.exports = function string(generator) {","coverage":""},"9":{"line":"        variable.call(this, generator);","coverage":5},"10":{"line":"    };","coverage":""},"11":{"line":"","coverage":""},"12":{"line":"string.prototype = new variable();","coverage":1},"13":{"line":"string.prototype.constructor = string;","coverage":1},"14":{"line":"string.prototype = extend(","coverage":1},"15":{"line":"    string.prototype,","coverage":""},"16":{"line":"    {","coverage":""},"17":{"line":"        check: function () {","coverage":""},"18":{"line":"            if(typeof this.value !== \"string\") {","coverage":7},"19":{"line":"                variable.prototype.fail.apply(this, [ \"%s is not a string\", this.value ]);","coverage":2},"20":{"line":"            }","coverage":""},"21":{"line":"","coverage":""},"22":{"line":"            return this;","coverage":5},"23":{"line":"        },","coverage":""},"24":{"line":"","coverage":""},"25":{"line":"        hasLength: function (expected) {","coverage":""},"26":{"line":"            this.generator.assertionsCount += 1;","coverage":3},"27":{"line":"","coverage":""},"28":{"line":"            if(this.value.length !== expected) {","coverage":3},"29":{"line":"                variable.prototype.fail.apply(this, [ \"%s has not length %d\", this.value, expected ]);","coverage":1},"30":{"line":"            }","coverage":""},"31":{"line":"","coverage":""},"32":{"line":"            return this;","coverage":2},"33":{"line":"        },","coverage":""},"34":{"line":"","coverage":""},"35":{"line":"        contains: function(expected) {","coverage":""},"36":{"line":"            this.generator.assertionsCount += 1;","coverage":2},"37":{"line":"","coverage":""},"38":{"line":"            if(this.value.indexOf(expected) < 0) {","coverage":2},"39":{"line":"                variable.prototype.fail.apply(this, [ \"String %s does not contain %s\", this.value, expected ]);","coverage":1},"40":{"line":"            }","coverage":""},"41":{"line":"","coverage":""},"42":{"line":"            return this;","coverage":1},"43":{"line":"        },","coverage":""},"44":{"line":"","coverage":""},"45":{"line":"        isEqualTo: function (expected) {","coverage":""},"46":{"line":"            this.generator.assertionsCount += 1;","coverage":1},"47":{"line":"","coverage":""},"48":{"line":"            if(this.value != expected) {","coverage":1},"49":{"line":"                this.fail(","coverage":1},"50":{"line":"                    util.format(\"String %s is not equal to %s\", this.value, expected),","coverage":""},"51":{"line":"                    expected,","coverage":""},"52":{"line":"                    this.value","coverage":""},"53":{"line":"                );","coverage":""},"54":{"line":"            }","coverage":""},"55":{"line":"","coverage":""},"56":{"line":"            return this;","coverage":0},"57":{"line":"        },","coverage":""},"58":{"line":"","coverage":""},"59":{"line":"        fail: function (message, reference, data) {","coverage":""},"60":{"line":"            var args = Array.prototype.slice.call(arguments, 3);","coverage":1},"61":{"line":"","coverage":""},"62":{"line":"            underscore.map(","coverage":1},"63":{"line":"                args,","coverage":""},"64":{"line":"                function (arg) {","coverage":""},"65":{"line":"                    return util.inspect(arg);","coverage":0},"66":{"line":"                }","coverage":""},"67":{"line":"            );","coverage":""},"68":{"line":"","coverage":""},"69":{"line":"            throw new exception(","coverage":1},"70":{"line":"                util.format.apply(util, [ message ].concat(args)),","coverage":""},"71":{"line":"                this,","coverage":""},"72":{"line":"                reference,","coverage":""},"73":{"line":"                data","coverage":""},"74":{"line":"            );","coverage":""},"75":{"line":"        }","coverage":""},"76":{"line":"    }","coverage":""},"77":{"line":");","coverage":""},"78":{"line":"","coverage":""}}},{"filename":"lib/asserter/string/exception.js","coverage":100,"hits":20,"misses":0,"sloc":20,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var util = require(\"util\"),","coverage":1},"4":{"line":"    underscore = require(\"underscore\"),","coverage":""},"5":{"line":"    extend = require(\"node.extend\"),","coverage":""},"6":{"line":"    color = require(\"cli-color\"),","coverage":""},"7":{"line":"    failure = require(\"../exception\"),","coverage":""},"8":{"line":"    exception = module.exports = function exception(message, asserter, reference, data) {","coverage":""},"9":{"line":"        failure.apply(this, [ message, asserter ]);","coverage":3},"10":{"line":"","coverage":""},"11":{"line":"        this.reference = reference;","coverage":3},"12":{"line":"        this.data = data;","coverage":3},"13":{"line":"    };","coverage":""},"14":{"line":"","coverage":""},"15":{"line":"exception.prototype = new failure();","coverage":1},"16":{"line":"exception.prototype.constructor = exception;","coverage":1},"17":{"line":"exception.prototype = extend(","coverage":1},"18":{"line":"    exception.prototype,","coverage":""},"19":{"line":"    {","coverage":""},"20":{"line":"        toString: function() {","coverage":""},"21":{"line":"            var diff = require(\"diff\").diffChars(this.data, this.reference),","coverage":1},"22":{"line":"                str = \"\",","coverage":""},"23":{"line":"                diffcontent = \"\";","coverage":""},"24":{"line":"","coverage":""},"25":{"line":"            str = str.concat(color.bgRed.white(\" - Reference \"))","coverage":1},"26":{"line":"                .concat(\" \")","coverage":""},"27":{"line":"                .concat(color.bgGreen.white(\" + Data \"))","coverage":""},"28":{"line":"                .concat(\"\\n\\n\")","coverage":""},"29":{"line":"            ;","coverage":""},"30":{"line":"","coverage":""},"31":{"line":"            underscore.each(","coverage":1},"32":{"line":"                diff,","coverage":""},"33":{"line":"                function(value) {","coverage":""},"34":{"line":"                    switch(true) {","coverage":9},"35":{"line":"                        case value.added:","coverage":""},"36":{"line":"                            value.value = value.value","coverage":2},"37":{"line":"                                .replace(\"\\n\", color.bgRed.white(\" \\n\"))","coverage":""},"38":{"line":"                                .replace(\"\\t\", color.bgRed.white(\"    \"))","coverage":""},"39":{"line":"                            ;","coverage":""},"40":{"line":"                            diffcontent = diffcontent.concat(color.bgRed.white(value.value));","coverage":2},"41":{"line":"                            break;","coverage":2},"42":{"line":"","coverage":""},"43":{"line":"                        case value.removed:","coverage":""},"44":{"line":"                            value.value = value.value","coverage":3},"45":{"line":"                                .replace(\"\\n\", color.bgGreen.white(\" \\n\"))","coverage":""},"46":{"line":"                                .replace(\"\\t\", color.bgGreen.white(\"    \"))","coverage":""},"47":{"line":"                            ;","coverage":""},"48":{"line":"                            diffcontent = diffcontent.concat(color.bgGreen.white(value.value));","coverage":3},"49":{"line":"                            break;","coverage":3},"50":{"line":"","coverage":""},"51":{"line":"                        default:","coverage":""},"52":{"line":"                            diffcontent = diffcontent.concat(value.value);","coverage":4},"53":{"line":"                            break;","coverage":4},"54":{"line":"                    }","coverage":""},"55":{"line":"                }","coverage":""},"56":{"line":"            );","coverage":""},"57":{"line":"","coverage":""},"58":{"line":"            return  util.format(","coverage":1},"59":{"line":"                \"Strings are not equal\\n%s%s\\n\\n%s\",","coverage":""},"60":{"line":"                str,","coverage":""},"61":{"line":"                diffcontent,","coverage":""},"62":{"line":"                this.stack","coverage":""},"63":{"line":"            );","coverage":""},"64":{"line":"        }","coverage":""},"65":{"line":"    }","coverage":""},"66":{"line":");","coverage":""},"67":{"line":"","coverage":""}}},{"filename":"lib/asserters/undefined.js","coverage":100,"hits":10,"misses":0,"sloc":10,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    asserter = require(\"../asserter\"),","coverage":""},"5":{"line":"    undefined = module.exports = function undefined(generator) {","coverage":""},"6":{"line":"        asserter.call(this, generator);","coverage":2},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"undefined.prototype = new asserter();","coverage":1},"10":{"line":"undefined.prototype.constructor = undefined;","coverage":1},"11":{"line":"undefined.prototype = extend(","coverage":1},"12":{"line":"    undefined.prototype,","coverage":""},"13":{"line":"    {","coverage":""},"14":{"line":"        setWith: function (value) {","coverage":""},"15":{"line":"            this.value = value;","coverage":2},"16":{"line":"","coverage":""},"17":{"line":"            return this.check();","coverage":2},"18":{"line":"        },","coverage":""},"19":{"line":"","coverage":""},"20":{"line":"        check: function () {","coverage":""},"21":{"line":"            if(typeof this.value !== \"undefined\") {","coverage":2},"22":{"line":"                this.fail(\"%s is not undefined\", this.value);","coverage":1},"23":{"line":"            }","coverage":""},"24":{"line":"","coverage":""},"25":{"line":"            return this;","coverage":1},"26":{"line":"        }","coverage":""},"27":{"line":"    }","coverage":""},"28":{"line":");","coverage":""},"29":{"line":"","coverage":""}}},{"filename":"lib/test/callback.js","coverage":83.33333333333334,"hits":5,"misses":1,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var underscore = require(\"underscore\"),","coverage":1},"4":{"line":"    controller = require(\"./callback/controller\");","coverage":""},"5":{"line":"","coverage":""},"6":{"line":"module.exports = function callback(code) {","coverage":1},"7":{"line":"    var cn = new controller(code),","coverage":1},"8":{"line":"        cb = function () {","coverage":""},"9":{"line":"            return cn.run.apply(cn, underscore.values(arguments));","coverage":0},"10":{"line":"        };","coverage":""},"11":{"line":"","coverage":""},"12":{"line":"    cb.controller = cn;","coverage":1},"13":{"line":"","coverage":""},"14":{"line":"    return cb;","coverage":1},"15":{"line":"};","coverage":""},"16":{"line":"","coverage":""}}},{"filename":"lib/test/callback/controller.js","coverage":100,"hits":8,"misses":0,"sloc":8,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var underscore = require(\"underscore\"),","coverage":1},"4":{"line":"    controller = module.exports = function controller(code) {","coverage":""},"5":{"line":"        this.code = code;","coverage":11},"6":{"line":"        this.args = [];","coverage":11},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"controller.prototype = {","coverage":1},"10":{"line":"    run: function () {","coverage":""},"11":{"line":"        this.args.push(underscore.values(arguments));","coverage":8},"12":{"line":"","coverage":""},"13":{"line":"        if(typeof this.code !== \"function\") {","coverage":8},"14":{"line":"            return;","coverage":4},"15":{"line":"        }","coverage":""},"16":{"line":"","coverage":""},"17":{"line":"        return this.code.apply(this, underscore.values(arguments));","coverage":4},"18":{"line":"    }","coverage":""},"19":{"line":"};","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/includer.js","coverage":50,"hits":15,"misses":15,"sloc":30,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var path = require(\"path\"),","coverage":1},"4":{"line":"    underscore = require('underscore'),","coverage":""},"5":{"line":"    includer = module.exports = function includer() {","coverage":""},"6":{"line":"        this.replacements = {};","coverage":1},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"includer.prototype = {","coverage":1},"10":{"line":"    applyTo: function(target) {","coverage":""},"11":{"line":"        var self = this;","coverage":0},"12":{"line":"","coverage":""},"13":{"line":"        target.require = function(module) {","coverage":0},"14":{"line":"            return self.require.apply(self, [ module, target ]);","coverage":0},"15":{"line":"        };","coverage":""},"16":{"line":"","coverage":""},"17":{"line":"        return this;","coverage":0},"18":{"line":"    },","coverage":""},"19":{"line":"","coverage":""},"20":{"line":"    require: function(module, target) {","coverage":""},"21":{"line":"        module = this.resolve(module, target);","coverage":0},"22":{"line":"","coverage":""},"23":{"line":"        if(require.cache[target.filename]) {","coverage":0},"24":{"line":"            delete require.cache[target.filename];","coverage":0},"25":{"line":"        }","coverage":""},"26":{"line":"","coverage":""},"27":{"line":"        if(require.cache[module + \".js\"]) {","coverage":0},"28":{"line":"            delete require.cache[module + \".js\"];","coverage":0},"29":{"line":"        }","coverage":""},"30":{"line":"","coverage":""},"31":{"line":"        for(var replacement in this.replacements) {","coverage":0},"32":{"line":"            if(new RegExp(replacement + \"$\").exec(module)) {","coverage":0},"33":{"line":"                return this.replacements[replacement];","coverage":0},"34":{"line":"            }","coverage":""},"35":{"line":"        }","coverage":""},"36":{"line":"","coverage":""},"37":{"line":"        module = require.call(require, module);","coverage":0},"38":{"line":"        this.applyTo(module);","coverage":0},"39":{"line":"","coverage":""},"40":{"line":"        return module;","coverage":0},"41":{"line":"    },","coverage":""},"42":{"line":"","coverage":""},"43":{"line":"    replace: function(search, replace) {","coverage":""},"44":{"line":"        this.replacements[search] = replace;","coverage":1},"45":{"line":"","coverage":""},"46":{"line":"        return this;","coverage":1},"47":{"line":"    },","coverage":""},"48":{"line":"","coverage":""},"49":{"line":"    resolve: function(module, target, fs) {","coverage":""},"50":{"line":"        var replaced;","coverage":5},"51":{"line":"","coverage":""},"52":{"line":"        fs = fs || require(\"path\");","coverage":5},"53":{"line":"","coverage":""},"54":{"line":"        if(module.indexOf(\"./\") === 0 || module.indexOf(\"../\") === 0) {","coverage":5},"55":{"line":"            module = path.resolve(path.dirname(target.filename), module);","coverage":4},"56":{"line":"        }","coverage":""},"57":{"line":"","coverage":""},"58":{"line":"        replaced = module;","coverage":5},"59":{"line":"        underscore.each(","coverage":5},"60":{"line":"            this.replacements,","coverage":""},"61":{"line":"            function(replace, search) {","coverage":""},"62":{"line":"                replaced = replaced.replace(search, replace);","coverage":2},"63":{"line":"            }","coverage":""},"64":{"line":"        );","coverage":""},"65":{"line":"","coverage":""},"66":{"line":"        if(fs.existsSync(replaced + \".js\")) {","coverage":5},"67":{"line":"            module = replaced;","coverage":1},"68":{"line":"        }","coverage":""},"69":{"line":"","coverage":""},"70":{"line":"        return module;","coverage":5},"71":{"line":"    }","coverage":""},"72":{"line":"};","coverage":""},"73":{"line":"","coverage":""}}},{"filename":"lib/report/field.js","coverage":35.294117647058826,"hits":6,"misses":11,"sloc":17,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var underscore = require(\"underscore\"),","coverage":1},"4":{"line":"    field = module.exports = function field(events) {","coverage":""},"5":{"line":"        this.events = events || [];","coverage":3},"6":{"line":"        this.renderer = [];","coverage":3},"7":{"line":"        this.value = \"\";","coverage":3},"8":{"line":"        this.event = \"\";","coverage":3},"9":{"line":"    };","coverage":""},"10":{"line":"","coverage":""},"11":{"line":"field.prototype = {","coverage":1},"12":{"line":"    register: function(dispatcher, output) {","coverage":""},"13":{"line":"        underscore.each(","coverage":0},"14":{"line":"            this.events,","coverage":""},"15":{"line":"            function(value) {","coverage":""},"16":{"line":"                dispatcher.on(value, this.render(value, output));","coverage":0},"17":{"line":"            },","coverage":""},"18":{"line":"            this","coverage":""},"19":{"line":"        );","coverage":""},"20":{"line":"","coverage":""},"21":{"line":"        return this;","coverage":0},"22":{"line":"    },","coverage":""},"23":{"line":"","coverage":""},"24":{"line":"    render: function(event, output) {","coverage":""},"25":{"line":"        var self = this;","coverage":0},"26":{"line":"","coverage":""},"27":{"line":"        if(typeof this.renderer[event] !== \"function\") {","coverage":0},"28":{"line":"            this.renderer[event] = function() {","coverage":0},"29":{"line":"                self.event = event;","coverage":0},"30":{"line":"                self.value = arguments;","coverage":0},"31":{"line":"","coverage":""},"32":{"line":"                output.write(self.toString());","coverage":0},"33":{"line":"            };","coverage":""},"34":{"line":"        }","coverage":""},"35":{"line":"","coverage":""},"36":{"line":"        return this.renderer[event];","coverage":0},"37":{"line":"    },","coverage":""},"38":{"line":"","coverage":""},"39":{"line":"    toString: function () {","coverage":""},"40":{"line":"        return this.value;","coverage":0},"41":{"line":"    }","coverage":""},"42":{"line":"};","coverage":""},"43":{"line":"","coverage":""}}},{"filename":"lib/report/fields/runner/atoum.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    util = require(\"util\"),","coverage":""},"5":{"line":"    color = require(\"../../color\"),","coverage":""},"6":{"line":"    field = require(\"../../field\"),","coverage":""},"7":{"line":"    atoum = module.exports = function atoum() {","coverage":""},"8":{"line":"        field.call(this, [ \"runnerStart\" ]);","coverage":2},"9":{"line":"    };","coverage":""},"10":{"line":"","coverage":""},"11":{"line":"atoum.prototype = new field();","coverage":1},"12":{"line":"atoum.prototype.constructor = atoum;","coverage":1},"13":{"line":"atoum.prototype = extend(","coverage":1},"14":{"line":"    atoum.prototype,","coverage":""},"15":{"line":"    {","coverage":""},"16":{"line":"        toString: function () {","coverage":""},"17":{"line":"            return util.format(color.title(\"atoum.js %s\\n\\n\"), require(\"../../../..\").version);","coverage":1},"18":{"line":"        }","coverage":""},"19":{"line":"    }","coverage":""},"20":{"line":");","coverage":""}}},{"filename":"lib/report/color.js","coverage":100,"hits":2,"misses":0,"sloc":2,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var color = require(\"cli-color\");","coverage":1},"4":{"line":"","coverage":""},"5":{"line":"module.exports = {","coverage":1},"6":{"line":"    title: color.blue,","coverage":""},"7":{"line":"    success: color.green,","coverage":""},"8":{"line":"    skipped: color.yellow,","coverage":""},"9":{"line":"    error: color.red,","coverage":""},"10":{"line":"    header: color.bold,","coverage":""},"11":{"line":"    ribbon: {","coverage":""},"12":{"line":"        success: color.bgGreen.white,","coverage":""},"13":{"line":"        error: color.bgRed.white","coverage":""},"14":{"line":"    }","coverage":""},"15":{"line":"};","coverage":""},"16":{"line":"","coverage":""}}},{"filename":"lib/report/fields/runner/node.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    util = require(\"util\"),","coverage":""},"5":{"line":"    color = require(\"../../color\"),","coverage":""},"6":{"line":"    field = require(\"../../field\"),","coverage":""},"7":{"line":"    atoum = module.exports = function atoum() {","coverage":""},"8":{"line":"        field.call(this, [ \"runnerStart\" ]);","coverage":2},"9":{"line":"    };","coverage":""},"10":{"line":"","coverage":""},"11":{"line":"atoum.prototype = new field();","coverage":1},"12":{"line":"atoum.prototype.constructor = atoum;","coverage":1},"13":{"line":"atoum.prototype = extend(","coverage":1},"14":{"line":"    atoum.prototype,","coverage":""},"15":{"line":"    {","coverage":""},"16":{"line":"        toString: function () {","coverage":""},"17":{"line":"            return util.format(\"> \" + color.header(\"node path\") + \": %s\\n\", process.execPath)","coverage":1},"18":{"line":"                .concat(util.format(","coverage":""},"19":{"line":"                    \"> \" + color.header(\"node versions\") + \": %s\\n\",","coverage":""},"20":{"line":"                    util.inspect(process.versions)","coverage":""},"21":{"line":"                ))","coverage":""},"22":{"line":"            ;","coverage":""},"23":{"line":"        }","coverage":""},"24":{"line":"    }","coverage":""},"25":{"line":");","coverage":""},"26":{"line":"","coverage":""}}},{"filename":"lib/score.js","coverage":100,"hits":31,"misses":0,"sloc":31,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var underscore = require(\"underscore\"),","coverage":1},"4":{"line":"    usage = require(\"./test/score/usage\"),","coverage":""},"5":{"line":"    score = module.exports = function score() {","coverage":""},"6":{"line":"        this.reset();","coverage":2},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"score.prototype = {","coverage":1},"10":{"line":"    reset: function () {","coverage":""},"11":{"line":"        this.tests = {};","coverage":2},"12":{"line":"        this.passedTests = 0;","coverage":2},"13":{"line":"        this.failedTests = 0;","coverage":2},"14":{"line":"        this.failures = 0;","coverage":2},"15":{"line":"        this.errors = 0;","coverage":2},"16":{"line":"        this.exceptions = 0;","coverage":2},"17":{"line":"        this.methods = 0;","coverage":2},"18":{"line":"        this.failedMethods = 0;","coverage":2},"19":{"line":"        this.passedMethods = 0;","coverage":2},"20":{"line":"        this.duration = 0;","coverage":2},"21":{"line":"        this.skipped = 0;","coverage":2},"22":{"line":"        this.usage = new usage();","coverage":2},"23":{"line":"        this.passed = true;","coverage":2},"24":{"line":"    },","coverage":""},"25":{"line":"","coverage":""},"26":{"line":"    addTest: function (test) {","coverage":""},"27":{"line":"        this.tests[test.class] = test.score;","coverage":5},"28":{"line":"        this.failures += test.score.failures;","coverage":5},"29":{"line":"        this.errors += test.score.errors.length;","coverage":5},"30":{"line":"        this.exceptions += test.score.exceptions;","coverage":5},"31":{"line":"        this.methods += underscore.size(test.score.methods);","coverage":5},"32":{"line":"        this.failedMethods += test.score.failedMethods;","coverage":5},"33":{"line":"        this.passedMethods += test.score.passedMethods;","coverage":5},"34":{"line":"        this.duration += test.score.duration;","coverage":5},"35":{"line":"        this.skipped += test.score.skipped;","coverage":5},"36":{"line":"","coverage":""},"37":{"line":"        if(false === test.score.passed) {","coverage":5},"38":{"line":"            this.failedTests += 1;","coverage":4},"39":{"line":"            this.passed = false;","coverage":4},"40":{"line":"        } else {","coverage":""},"41":{"line":"            this.passedTests += 1;","coverage":1},"42":{"line":"        }","coverage":""},"43":{"line":"","coverage":""},"44":{"line":"        this.usage.addFromStat(test.score.usage.stat);","coverage":5},"45":{"line":"","coverage":""},"46":{"line":"        return this;","coverage":5},"47":{"line":"    }","coverage":""},"48":{"line":"};","coverage":""},"49":{"line":"","coverage":""}}},{"filename":"lib/test/score/usage.js","coverage":90.9090909090909,"hits":20,"misses":2,"sloc":22,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var usage = module.exports = function usage(unit) {","coverage":1},"4":{"line":"        this.unit = unit || usage.units.B;","coverage":12},"5":{"line":"        this.stat = {","coverage":12},"6":{"line":"            rss: 0,","coverage":""},"7":{"line":"            heapTotal: 0,","coverage":""},"8":{"line":"            heapUsed: 0","coverage":""},"9":{"line":"        };","coverage":""},"10":{"line":"    };","coverage":""},"11":{"line":"","coverage":""},"12":{"line":"usage.units = {","coverage":1},"13":{"line":"    \"B\": {","coverage":""},"14":{"line":"        \"B\": 1,","coverage":""},"15":{"line":"        \"KB\": 1024,","coverage":""},"16":{"line":"        \"MB\": Math.pow(1024, 2),","coverage":""},"17":{"line":"        \"GB\": Math.pow(1024, 3)","coverage":""},"18":{"line":"    },","coverage":""},"19":{"line":"    \"KB\": {","coverage":""},"20":{"line":"        \"B\": 1 / 1024,","coverage":""},"21":{"line":"        \"KB\": 1,","coverage":""},"22":{"line":"        \"MB\": 1024,","coverage":""},"23":{"line":"        \"GB\": Math.pow(1024, 2)","coverage":""},"24":{"line":"    },","coverage":""},"25":{"line":"    \"MB\": {","coverage":""},"26":{"line":"        \"B\": Math.pow(1 / 1024, 2),","coverage":""},"27":{"line":"        \"KB\": 1 / 1024,","coverage":""},"28":{"line":"        \"MB\": 1,","coverage":""},"29":{"line":"        \"GB\": Math.pow(1024, 1)","coverage":""},"30":{"line":"    },","coverage":""},"31":{"line":"    \"GB\": {","coverage":""},"32":{"line":"        \"B\": Math.pow(1 / 1024, 3),","coverage":""},"33":{"line":"        \"KB\": Math.pow(1 / 1024, 2),","coverage":""},"34":{"line":"        \"MB\": 1 / 1024,","coverage":""},"35":{"line":"        \"GB\": 1","coverage":""},"36":{"line":"    }","coverage":""},"37":{"line":"};","coverage":""},"38":{"line":"","coverage":""},"39":{"line":"usage.prototype = {","coverage":1},"40":{"line":"    addFromStat: function (stat) {","coverage":""},"41":{"line":"        var key;","coverage":12},"42":{"line":"","coverage":""},"43":{"line":"        for(key in stat) {","coverage":12},"44":{"line":"            if(stat.hasOwnProperty(key)) {","coverage":33},"45":{"line":"                this.stat[key] = stat[key] + (this.stat[key] || 0);","coverage":33},"46":{"line":"            }","coverage":""},"47":{"line":"","coverage":""},"48":{"line":"            if(this.stat.hasOwnProperty(key)) {","coverage":33},"49":{"line":"                this.stat[key] = ((this.stat[key] || 0) > 0 ? (this.stat[key] || 0) : 0);","coverage":33},"50":{"line":"            }","coverage":""},"51":{"line":"        }","coverage":""},"52":{"line":"","coverage":""},"53":{"line":"        return this;","coverage":12},"54":{"line":"    },","coverage":""},"55":{"line":"","coverage":""},"56":{"line":"    format: function (unit, round) {","coverage":""},"57":{"line":"        var stat = {},","coverage":4},"58":{"line":"            key;","coverage":""},"59":{"line":"","coverage":""},"60":{"line":"        if(typeof round !== \"undefined\") {","coverage":4},"61":{"line":"            round = Math.pow(10, round);","coverage":0},"62":{"line":"        }","coverage":""},"63":{"line":"","coverage":""},"64":{"line":"        for(key in this.stat) {","coverage":4},"65":{"line":"            if(this.stat.hasOwnProperty(key)) {","coverage":12},"66":{"line":"                stat[key] = this.stat[key] / this.unit[unit];","coverage":12},"67":{"line":"","coverage":""},"68":{"line":"                if(typeof round !== \"undefined\") {","coverage":12},"69":{"line":"                    stat[key] = Math.round(stat[key] * round) / round;","coverage":0},"70":{"line":"                }","coverage":""},"71":{"line":"            }","coverage":""},"72":{"line":"        }","coverage":""},"73":{"line":"","coverage":""},"74":{"line":"        this.unit = usage.units[unit];","coverage":4},"75":{"line":"        return new usage(usage.units[unit]).addFromStat(stat);","coverage":4},"76":{"line":"    }","coverage":""},"77":{"line":"};","coverage":""},"78":{"line":"","coverage":""}}},{"filename":"lib/report/fields/runner/result.js","coverage":100,"hits":9,"misses":0,"sloc":9,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    util = require(\"util\"),","coverage":""},"5":{"line":"    color = require(\"../../color\"),","coverage":""},"6":{"line":"    field = require(\"../../field\"),","coverage":""},"7":{"line":"    result = module.exports = function result() {","coverage":""},"8":{"line":"        field.call(this, [ \"runnerStop\" ]);","coverage":2},"9":{"line":"    };","coverage":""},"10":{"line":"","coverage":""},"11":{"line":"result.prototype = new field();","coverage":1},"12":{"line":"result.prototype.constructor = result;","coverage":1},"13":{"line":"result.prototype = extend(","coverage":1},"14":{"line":"    result.prototype,","coverage":""},"15":{"line":"    {","coverage":""},"16":{"line":"        toString: function () {","coverage":""},"17":{"line":"            var runner = this.value[0];","coverage":2},"18":{"line":"","coverage":""},"19":{"line":"            if(runner.score.passed === true) {","coverage":2},"20":{"line":"                return util.format(","coverage":1},"21":{"line":"                    color.ribbon.success(\"Success (%d test(s), %d method(s), %d assertion(s)) !\\n\"),","coverage":""},"22":{"line":"                    runner.score.passedTests,","coverage":""},"23":{"line":"                    runner.score.methods,","coverage":""},"24":{"line":"                    runner.generator.assertionsCount","coverage":""},"25":{"line":"                );","coverage":""},"26":{"line":"            } else {","coverage":""},"27":{"line":"                return util.format(","coverage":1},"28":{"line":"                    color.ribbon.error(\"Failure (%d/%d test(s), %d/%d method(s), %d assertion(s)) !\\n\"),","coverage":""},"29":{"line":"                    runner.score.passedTests,","coverage":""},"30":{"line":"                    runner.score.passedTests + runner.score.failedTests,","coverage":""},"31":{"line":"                    runner.score.passedMethods,","coverage":""},"32":{"line":"                    runner.score.methods,","coverage":""},"33":{"line":"                    runner.generator.assertionsCount","coverage":""},"34":{"line":"                );","coverage":""},"35":{"line":"            }","coverage":""},"36":{"line":"        }","coverage":""},"37":{"line":"    }","coverage":""},"38":{"line":");","coverage":""},"39":{"line":"","coverage":""}}},{"filename":"lib/report/fields/runner/stat.js","coverage":100,"hits":7,"misses":0,"sloc":7,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    util = require(\"util\"),","coverage":""},"5":{"line":"    color = require(\"../../color\"),","coverage":""},"6":{"line":"    field = require(\"../../field\"),","coverage":""},"7":{"line":"    stat = module.exports = function stat() {","coverage":""},"8":{"line":"        field.call(this, [ \"runnerStop\" ]);","coverage":2},"9":{"line":"    };","coverage":""},"10":{"line":"","coverage":""},"11":{"line":"stat.prototype = new field();","coverage":1},"12":{"line":"stat.prototype.constructor = stat;","coverage":1},"13":{"line":"stat.prototype = extend(","coverage":1},"14":{"line":"    stat.prototype,","coverage":""},"15":{"line":"    {","coverage":""},"16":{"line":"        toString: function () {","coverage":""},"17":{"line":"            var runner = this.value[0];","coverage":1},"18":{"line":"","coverage":""},"19":{"line":"            return util.format(","coverage":1},"20":{"line":"                    \"\\n> \" + color.header(\"Total test duration\") + \": %d second(s).\\n\",","coverage":""},"21":{"line":"                    Math.round(runner.score.duration * 10000) / 10000","coverage":""},"22":{"line":"                )","coverage":""},"23":{"line":"                .concat(util.format(","coverage":""},"24":{"line":"                    \"> \" + color.header(\"Total test memory usage\") + \": %s\\n\",","coverage":""},"25":{"line":"                    util.inspect(runner.score.usage.format(\"KB\", 4).stat)","coverage":""},"26":{"line":"                ))","coverage":""},"27":{"line":"            ;","coverage":""},"28":{"line":"        }","coverage":""},"29":{"line":"    }","coverage":""},"30":{"line":");","coverage":""},"31":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/error.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    color = require(\"../../color\"),","coverage":""},"5":{"line":"    field = require(\"../../field\"),","coverage":""},"6":{"line":"    error = module.exports = function error() {","coverage":""},"7":{"line":"        field.call(this, [ \"testError\" ]);","coverage":2},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"error.prototype = new field();","coverage":1},"11":{"line":"error.prototype.constructor = error;","coverage":1},"12":{"line":"error.prototype = extend(","coverage":1},"13":{"line":"    error.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        toString: function () {","coverage":""},"16":{"line":"            return color.error(\"E\");","coverage":1},"17":{"line":"        }","coverage":""},"18":{"line":"    }","coverage":""},"19":{"line":");","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/exception.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    color = require(\"../../color\"),","coverage":""},"5":{"line":"    field = require(\"../../field\"),","coverage":""},"6":{"line":"    exception = module.exports = function exception() {","coverage":""},"7":{"line":"        field.call(this, [ \"testMethodException\" ]);","coverage":2},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"exception.prototype = new field();","coverage":1},"11":{"line":"exception.prototype.constructor = exception;","coverage":1},"12":{"line":"exception.prototype = extend(","coverage":1},"13":{"line":"    exception.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        toString: function () {","coverage":""},"16":{"line":"            return color.error(\"X\");","coverage":1},"17":{"line":"        }","coverage":""},"18":{"line":"    }","coverage":""},"19":{"line":");","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/failure.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    color = require(\"../../color\"),","coverage":""},"5":{"line":"    field = require(\"../../field\"),","coverage":""},"6":{"line":"    failure = module.exports = function failure() {","coverage":""},"7":{"line":"        field.call(this, [ \"testMethodFailure\" ]);","coverage":2},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"failure.prototype = new field();","coverage":1},"11":{"line":"failure.prototype.constructor = failure;","coverage":1},"12":{"line":"failure.prototype = extend(","coverage":1},"13":{"line":"    failure.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        toString: function () {","coverage":""},"16":{"line":"            return color.error(\"F\");","coverage":1},"17":{"line":"        }","coverage":""},"18":{"line":"    }","coverage":""},"19":{"line":");","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/test/score.js","coverage":100,"hits":26,"misses":0,"sloc":26,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var usage = require(\"./score/usage\"),","coverage":1},"4":{"line":"    score = module.exports = function score() {","coverage":""},"5":{"line":"        this.methods = {};","coverage":4},"6":{"line":"        this.passedMethods = 0;","coverage":4},"7":{"line":"        this.failedMethods = 0;","coverage":4},"8":{"line":"        this.usage = new usage();","coverage":4},"9":{"line":"        this.passed = true;","coverage":4},"10":{"line":"        this.failures = 0;","coverage":4},"11":{"line":"        this.errors = [];","coverage":4},"12":{"line":"        this.exceptions = 0;","coverage":4},"13":{"line":"        this.duration = 0;","coverage":4},"14":{"line":"        this.skipped = 0;","coverage":4},"15":{"line":"    };","coverage":""},"16":{"line":"","coverage":""},"17":{"line":"score.prototype = {","coverage":1},"18":{"line":"    addMethod: function (method) {","coverage":""},"19":{"line":"        this.methods[method.name] = method.score;","coverage":4},"20":{"line":"        this.failures += (typeof method.score.failure === \"undefined\" ? 0 : 1);","coverage":4},"21":{"line":"        this.exceptions += (typeof method.score.exception === \"undefined\" ? 0 : 1);","coverage":4},"22":{"line":"        this.skipped += (typeof method.score.skipped === \"undefined\" ? 0 : 1);","coverage":4},"23":{"line":"        this.duration += method.score.duration;","coverage":4},"24":{"line":"","coverage":""},"25":{"line":"        if(false === method.score.passed) {","coverage":4},"26":{"line":"            this.failedMethods += 1;","coverage":3},"27":{"line":"            this.passed = false;","coverage":3},"28":{"line":"        } else {","coverage":""},"29":{"line":"            this.passedMethods += 1;","coverage":1},"30":{"line":"        }","coverage":""},"31":{"line":"","coverage":""},"32":{"line":"        this.usage.addFromStat(method.score.usage.stat);","coverage":4},"33":{"line":"","coverage":""},"34":{"line":"        return this;","coverage":4},"35":{"line":"    },","coverage":""},"36":{"line":"","coverage":""},"37":{"line":"    addError: function (error) {","coverage":""},"38":{"line":"        this.errors.push(error);","coverage":1},"39":{"line":"        this.passed = false;","coverage":1},"40":{"line":"","coverage":""},"41":{"line":"        return this;","coverage":1},"42":{"line":"    }","coverage":""},"43":{"line":"};","coverage":""},"44":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/footer.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    util = require(\"util\"),","coverage":""},"5":{"line":"    field = require(\"../../field\"),","coverage":""},"6":{"line":"    footer = module.exports = function footer() {","coverage":""},"7":{"line":"        field.call(this, [ \"testStop\" ]);","coverage":2},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"footer.prototype = new field();","coverage":1},"11":{"line":"footer.prototype.constructor = footer;","coverage":1},"12":{"line":"footer.prototype = extend(","coverage":1},"13":{"line":"    footer.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        toString: function () {","coverage":""},"16":{"line":"            return util.format(","coverage":1},"17":{"line":"                    \"]\\n=> Test duration: %d second(s).\\n\",","coverage":""},"18":{"line":"                    Math.round(this.value[0].score.duration * 10000) / 10000","coverage":""},"19":{"line":"                )","coverage":""},"20":{"line":"                .concat(util.format(","coverage":""},"21":{"line":"                    \"=> Memore usage: %s\\n\",","coverage":""},"22":{"line":"                    util.inspect(this.value[0].score.usage.format(\"KB\", 4).stat)","coverage":""},"23":{"line":"                ))","coverage":""},"24":{"line":"            ;","coverage":""},"25":{"line":"        }","coverage":""},"26":{"line":"    }","coverage":""},"27":{"line":");","coverage":""},"28":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/header.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    util = require(\"util\"),","coverage":""},"5":{"line":"    color = require(\"../../color\"),","coverage":""},"6":{"line":"    field = require(\"../../field\"),","coverage":""},"7":{"line":"    header = module.exports = function header() {","coverage":""},"8":{"line":"        field.call(this, [ \"testStart\" ]);","coverage":2},"9":{"line":"    };","coverage":""},"10":{"line":"","coverage":""},"11":{"line":"header.prototype = new field();","coverage":1},"12":{"line":"header.prototype.constructor = header;","coverage":1},"13":{"line":"header.prototype = extend(","coverage":1},"14":{"line":"    header.prototype,","coverage":""},"15":{"line":"    {","coverage":""},"16":{"line":"        toString: function () {","coverage":""},"17":{"line":"            return util.format(\"\\n> \" + color.header(\"%s\") + \"\\n[\", this.value[0].class);","coverage":1},"18":{"line":"        }","coverage":""},"19":{"line":"    }","coverage":""},"20":{"line":");","coverage":""},"21":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/skipped.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    color = require(\"../../color\"),","coverage":""},"5":{"line":"    field = require(\"../../field\"),","coverage":""},"6":{"line":"    skipped = module.exports = function skipped() {","coverage":""},"7":{"line":"        field.call(this, [ \"testMethodSkipped\" ]);","coverage":2},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"skipped.prototype = new field();","coverage":1},"11":{"line":"skipped.prototype.constructor = skipped;","coverage":1},"12":{"line":"skipped.prototype = extend(","coverage":1},"13":{"line":"    skipped.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        toString: function () {","coverage":""},"16":{"line":"            return color.skipped(\".\");","coverage":1},"17":{"line":"        }","coverage":""},"18":{"line":"    }","coverage":""},"19":{"line":");","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/report/fields/test/success.js","coverage":100,"hits":6,"misses":0,"sloc":6,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var extend = require(\"node.extend\"),","coverage":1},"4":{"line":"    color = require(\"../../color\"),","coverage":""},"5":{"line":"    field = require(\"../../field\"),","coverage":""},"6":{"line":"    success = module.exports = function success() {","coverage":""},"7":{"line":"        field.call(this, [ \"testMethodSuccess\" ]);","coverage":2},"8":{"line":"    };","coverage":""},"9":{"line":"","coverage":""},"10":{"line":"success.prototype = new field();","coverage":1},"11":{"line":"success.prototype.constructor = success;","coverage":1},"12":{"line":"success.prototype = extend(","coverage":1},"13":{"line":"    success.prototype,","coverage":""},"14":{"line":"    {","coverage":""},"15":{"line":"        toString: function () {","coverage":""},"16":{"line":"            return color.success(\"S\");","coverage":1},"17":{"line":"        }","coverage":""},"18":{"line":"    }","coverage":""},"19":{"line":");","coverage":""},"20":{"line":"","coverage":""}}},{"filename":"lib/report.js","coverage":66.66666666666666,"hits":6,"misses":3,"sloc":9,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var underscore = require(\"underscore\"),","coverage":1},"4":{"line":"    report = module.exports = function report(output) {","coverage":""},"5":{"line":"        this.output = output;","coverage":2},"6":{"line":"        this.fields = [];","coverage":2},"7":{"line":"    };","coverage":""},"8":{"line":"","coverage":""},"9":{"line":"report.prototype = {","coverage":1},"10":{"line":"    addField: function(field) {","coverage":""},"11":{"line":"        this.fields.push(field);","coverage":4},"12":{"line":"","coverage":""},"13":{"line":"        return this;","coverage":4},"14":{"line":"    },","coverage":""},"15":{"line":"","coverage":""},"16":{"line":"    register: function (dispatcher) {","coverage":""},"17":{"line":"        underscore.each(","coverage":0},"18":{"line":"            this.fields,","coverage":""},"19":{"line":"            function(field) {","coverage":""},"20":{"line":"                field.register(dispatcher, this.output);","coverage":0},"21":{"line":"            },","coverage":""},"22":{"line":"            this","coverage":""},"23":{"line":"        );","coverage":""},"24":{"line":"","coverage":""},"25":{"line":"        return this;","coverage":0},"26":{"line":"    }","coverage":""},"27":{"line":"};","coverage":""},"28":{"line":"","coverage":""}}},{"filename":"lib/runner.js","coverage":39.02439024390244,"hits":16,"misses":25,"sloc":41,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var fs = require(\"fs\"),","coverage":1},"4":{"line":"    path = require(\"path\"),","coverage":""},"5":{"line":"    dispatcher = require(\"events\").EventEmitter,","coverage":""},"6":{"line":"    underscore = require(\"underscore\"),","coverage":""},"7":{"line":"    test = require(\"./test\"),","coverage":""},"8":{"line":"    score = require(\"./score\"),","coverage":""},"9":{"line":"    runner = module.exports = function runner(generator, includer) {","coverage":""},"10":{"line":"        this.generator = generator;","coverage":2},"11":{"line":"        this.includer = includer;","coverage":2},"12":{"line":"        this.loop = false;","coverage":2},"13":{"line":"        this.score = new score();","coverage":2},"14":{"line":"        this.dispatcher = new dispatcher();","coverage":2},"15":{"line":"        this.reports = [];","coverage":2},"16":{"line":"","coverage":""},"17":{"line":"        return this;","coverage":2},"18":{"line":"    };","coverage":""},"19":{"line":"","coverage":""},"20":{"line":"runner.prototype = {","coverage":1},"21":{"line":"    setLoop: function (enable, readline) {","coverage":""},"22":{"line":"        this.loop = enable;","coverage":2},"23":{"line":"","coverage":""},"24":{"line":"        if(this.loop) {","coverage":2},"25":{"line":"            if(typeof this.dialog === \"undefined\") {","coverage":1},"26":{"line":"                this.dialog = (readline || require(\"readline\")).createInterface({","coverage":1},"27":{"line":"                    input: process.stdin,","coverage":""},"28":{"line":"                    output: process.stdout","coverage":""},"29":{"line":"                });","coverage":""},"30":{"line":"            }","coverage":""},"31":{"line":"        } else {","coverage":""},"32":{"line":"            if(typeof this.dialog !== \"undefined\") {","coverage":1},"33":{"line":"                this.dialog.close();","coverage":1},"34":{"line":"            }","coverage":""},"35":{"line":"        }","coverage":""},"36":{"line":"","coverage":""},"37":{"line":"        return this;","coverage":2},"38":{"line":"    },","coverage":""},"39":{"line":"","coverage":""},"40":{"line":"    addReport: function(report) {","coverage":""},"41":{"line":"        this.reports.push(report.register(this.dispatcher));","coverage":0},"42":{"line":"","coverage":""},"43":{"line":"        return this;","coverage":0},"44":{"line":"    },","coverage":""},"45":{"line":"","coverage":""},"46":{"line":"    run: function (path) {","coverage":""},"47":{"line":"        var self = this;","coverage":0},"48":{"line":"","coverage":""},"49":{"line":"        this.dispatcher.emit(\"runnerStart\", this);","coverage":0},"50":{"line":"","coverage":""},"51":{"line":"        underscore.each(","coverage":0},"52":{"line":"            this.getTests(path),","coverage":""},"53":{"line":"            function (test) {","coverage":""},"54":{"line":"                this.score.addTest(test.run());","coverage":0},"55":{"line":"            },","coverage":""},"56":{"line":"            this","coverage":""},"57":{"line":"        );","coverage":""},"58":{"line":"","coverage":""},"59":{"line":"        this.dispatcher.emit(\"runnerStop\", this);","coverage":0},"60":{"line":"","coverage":""},"61":{"line":"        if(true === this.loop) {","coverage":0},"62":{"line":"            this.dialog.question(","coverage":0},"63":{"line":"                \"Press <enter> to reexecute or any other key and <enter> to quit...\\n\",","coverage":""},"64":{"line":"                function (answer) {","coverage":""},"65":{"line":"                    if(!answer) {","coverage":0},"66":{"line":"                        self.generator.reset();","coverage":0},"67":{"line":"                        self.score.reset();","coverage":0},"68":{"line":"","coverage":""},"69":{"line":"                        self.run(path);","coverage":0},"70":{"line":"                    } else {","coverage":""},"71":{"line":"                        self.exit();","coverage":0},"72":{"line":"                    }","coverage":""},"73":{"line":"                });","coverage":""},"74":{"line":"        } else {","coverage":""},"75":{"line":"            this.exit();","coverage":0},"76":{"line":"        }","coverage":""},"77":{"line":"    },","coverage":""},"78":{"line":"","coverage":""},"79":{"line":"    exit: function () {","coverage":""},"80":{"line":"        if(typeof this.dialog !== \"undefined\") {","coverage":0},"81":{"line":"            this.dialog.close();","coverage":0},"82":{"line":"        }","coverage":""},"83":{"line":"    },","coverage":""},"84":{"line":"","coverage":""},"85":{"line":"    getTests: function(directory, tests) {","coverage":""},"86":{"line":"        var entries = fs.readdirSync(directory);","coverage":0},"87":{"line":"","coverage":""},"88":{"line":"        tests = tests || [];","coverage":0},"89":{"line":"","coverage":""},"90":{"line":"        underscore.each(","coverage":0},"91":{"line":"            entries,","coverage":""},"92":{"line":"            function (value) {","coverage":""},"93":{"line":"                var testfile = path.resolve(directory, value);","coverage":0},"94":{"line":"","coverage":""},"95":{"line":"                if(fs.statSync(testfile).isDirectory()) {","coverage":0},"96":{"line":"                    this.getTests(testfile, tests);","coverage":0},"97":{"line":"                } else {","coverage":""},"98":{"line":"                    tests.push(this.generator.injectInto(new test(testfile, this.dispatcher)));","coverage":0},"99":{"line":"                }","coverage":""},"100":{"line":"            },","coverage":""},"101":{"line":"            this","coverage":""},"102":{"line":"        );","coverage":""},"103":{"line":"","coverage":""},"104":{"line":"        return tests;","coverage":0},"105":{"line":"    }","coverage":""},"106":{"line":"};","coverage":""},"107":{"line":"","coverage":""}}},{"filename":"lib/test.js","coverage":26.08695652173913,"hits":6,"misses":17,"sloc":23,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var underscore = require(\"underscore\"),","coverage":1},"4":{"line":"    score = require(\"./test/score\"),","coverage":""},"5":{"line":"    method = require(\"./test/method\"),","coverage":""},"6":{"line":"    test = module.exports = function test(testClass, dispatcher) {","coverage":""},"7":{"line":"        this.class = testClass;","coverage":1},"8":{"line":"        this.score = new score();","coverage":1},"9":{"line":"        this.usage = {};","coverage":1},"10":{"line":"        this.dispatcher = dispatcher;","coverage":1},"11":{"line":"    };","coverage":""},"12":{"line":"","coverage":""},"13":{"line":"test.prototype = {","coverage":1},"14":{"line":"    run: function () {","coverage":""},"15":{"line":"        if(this.dispatcher) {","coverage":0},"16":{"line":"            this.dispatcher.emit(\"testStart\", this);","coverage":0},"17":{"line":"        }","coverage":""},"18":{"line":"","coverage":""},"19":{"line":"        try {","coverage":0},"20":{"line":"            underscore.each(","coverage":0},"21":{"line":"                this.getMethods(),","coverage":""},"22":{"line":"                function(method) {","coverage":""},"23":{"line":"                    this.score.addMethod(method.run());","coverage":0},"24":{"line":"                },","coverage":""},"25":{"line":"                this","coverage":""},"26":{"line":"            );","coverage":""},"27":{"line":"        } catch(error) {","coverage":""},"28":{"line":"            error.stack = error.stack.split(\"\\n\").slice(1).join(\"\\n\");","coverage":0},"29":{"line":"            this.score.addError(error);","coverage":0},"30":{"line":"","coverage":""},"31":{"line":"            if(this.dispatcher) {","coverage":0},"32":{"line":"                this.dispatcher.emit(\"testError\", this);","coverage":0},"33":{"line":"            }","coverage":""},"34":{"line":"        }","coverage":""},"35":{"line":"","coverage":""},"36":{"line":"        if(this.dispatcher) {","coverage":0},"37":{"line":"            this.dispatcher.emit(\"testStop\", this);","coverage":0},"38":{"line":"        }","coverage":""},"39":{"line":"","coverage":""},"40":{"line":"        return this;","coverage":0},"41":{"line":"    },","coverage":""},"42":{"line":"","coverage":""},"43":{"line":"    getMethods: function () {","coverage":""},"44":{"line":"        var unit = require(this.class),","coverage":0},"45":{"line":"            methods = [],","coverage":""},"46":{"line":"            name;","coverage":""},"47":{"line":"","coverage":""},"48":{"line":"        for(name in unit) {","coverage":0},"49":{"line":"            if(unit.hasOwnProperty(name) && /^test[A-Z_\\-]/.exec(name) && typeof unit[name] === \"function\") {","coverage":0},"50":{"line":"                methods.push(new method(name, this, unit[name], this.dispatcher));","coverage":0},"51":{"line":"            }","coverage":""},"52":{"line":"        }","coverage":""},"53":{"line":"","coverage":""},"54":{"line":"        return methods;","coverage":0},"55":{"line":"    }","coverage":""},"56":{"line":"};","coverage":""},"57":{"line":"","coverage":""}}},{"filename":"lib/test/method.js","coverage":5.263157894736842,"hits":2,"misses":36,"sloc":38,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var microtime = require(\"microtime-x\"),","coverage":1},"4":{"line":"    score = require(\"./method/score\"),","coverage":""},"5":{"line":"    failure = require(\"../asserter/exception\"),","coverage":""},"6":{"line":"    skipped = require(\"./method/exception\"),","coverage":""},"7":{"line":"    method = module.exports = function method(name, test, method, dispatcher) {","coverage":""},"8":{"line":"        this.name = name;","coverage":0},"9":{"line":"        this.test = test;","coverage":0},"10":{"line":"        this.method = method;","coverage":0},"11":{"line":"        this.score = new score();","coverage":0},"12":{"line":"        this.dispatcher = dispatcher;","coverage":0},"13":{"line":"    };","coverage":""},"14":{"line":"","coverage":""},"15":{"line":"method.prototype = {","coverage":1},"16":{"line":"    run: function () {","coverage":""},"17":{"line":"        var usage = process.memoryUsage(),","coverage":0},"18":{"line":"            start = microtime();","coverage":""},"19":{"line":"","coverage":""},"20":{"line":"        if(this.dispatcher) {","coverage":0},"21":{"line":"            this.dispatcher.emit(\"testMethodStart\", this);","coverage":0},"22":{"line":"        }","coverage":""},"23":{"line":"","coverage":""},"24":{"line":"        try {","coverage":0},"25":{"line":"            this.method.call(this.test);","coverage":0},"26":{"line":"","coverage":""},"27":{"line":"            if(this.dispatcher) {","coverage":0},"28":{"line":"                this.dispatcher.emit(\"testMethodSuccess\", this);","coverage":0},"29":{"line":"            }","coverage":""},"30":{"line":"        } catch(exception) {","coverage":""},"31":{"line":"            switch(true) {","coverage":0},"32":{"line":"                case (exception instanceof failure):","coverage":""},"33":{"line":"                    this.score.addFailure(exception);","coverage":0},"34":{"line":"","coverage":""},"35":{"line":"                    if(this.dispatcher) {","coverage":0},"36":{"line":"                        this.dispatcher.emit(\"testMethodFailure\", this);","coverage":0},"37":{"line":"                    }","coverage":""},"38":{"line":"                    break;","coverage":0},"39":{"line":"","coverage":""},"40":{"line":"                case (exception instanceof skipped):","coverage":""},"41":{"line":"                    this.score.addSkipped(exception);","coverage":0},"42":{"line":"","coverage":""},"43":{"line":"                    if(this.dispatcher) {","coverage":0},"44":{"line":"                        this.dispatcher.emit(\"testMethodSkipped\", this);","coverage":0},"45":{"line":"                    }","coverage":""},"46":{"line":"                    break;","coverage":0},"47":{"line":"","coverage":""},"48":{"line":"                default:","coverage":""},"49":{"line":"                    exception.stack = (exception.stack || \"\").split(\"\\n\").slice(1).join(\"\\n\");","coverage":0},"50":{"line":"                    this.score.addException(exception);","coverage":0},"51":{"line":"","coverage":""},"52":{"line":"                    if(this.dispatcher) {","coverage":0},"53":{"line":"                        this.dispatcher.emit(\"testMethodException\", this);","coverage":0},"54":{"line":"                    }","coverage":""},"55":{"line":"                    break;","coverage":0},"56":{"line":"            }","coverage":""},"57":{"line":"        }","coverage":""},"58":{"line":"","coverage":""},"59":{"line":"        if(this.dispatcher) {","coverage":0},"60":{"line":"            this.dispatcher.emit(\"testMethodStop\", this);","coverage":0},"61":{"line":"        }","coverage":""},"62":{"line":"","coverage":""},"63":{"line":"        this.score","coverage":0},"64":{"line":"            .setDuration((microtime() - start) / Math.pow(10, 6))","coverage":""},"65":{"line":"            .setUsage((function (before) {","coverage":""},"66":{"line":"                var after = process.memoryUsage(),","coverage":0},"67":{"line":"                    key;","coverage":""},"68":{"line":"","coverage":""},"69":{"line":"                for(key in after) {","coverage":0},"70":{"line":"                    if(after.hasOwnProperty(key)) {","coverage":0},"71":{"line":"                        before[key] = ((after[key] - (before[key] || 0)) / 1024);","coverage":0},"72":{"line":"                    }","coverage":""},"73":{"line":"","coverage":""},"74":{"line":"                    before[key] = ((before[key] || 0) > 0 ? (before[key] || 0) : 0);","coverage":0},"75":{"line":"                }","coverage":""},"76":{"line":"","coverage":""},"77":{"line":"                return before;","coverage":0},"78":{"line":"            }(usage)))","coverage":""},"79":{"line":"        ;","coverage":""},"80":{"line":"","coverage":""},"81":{"line":"        return this;","coverage":0},"82":{"line":"    }","coverage":""},"83":{"line":"};","coverage":""},"84":{"line":"","coverage":""}}},{"filename":"lib/test/method/score.js","coverage":31.25,"hits":5,"misses":11,"sloc":16,"source":{"1":{"line":"\"use strict\";","coverage":""},"2":{"line":"","coverage":""},"3":{"line":"var usage = require(\"../score/usage\"),","coverage":1},"4":{"line":"    score = module.exports = function score() {","coverage":""},"5":{"line":"        this.duration = 0;","coverage":1},"6":{"line":"        this.usage = new usage();","coverage":1},"7":{"line":"        this.passed = true;","coverage":1},"8":{"line":"    },","coverage":""},"9":{"line":"    priv = {","coverage":""},"10":{"line":"        add: function (type, value) {","coverage":""},"11":{"line":"            this[type] = value;","coverage":0},"12":{"line":"            this.passed = false;","coverage":0},"13":{"line":"","coverage":""},"14":{"line":"            return this;","coverage":0},"15":{"line":"        }","coverage":""},"16":{"line":"    };","coverage":""},"17":{"line":"","coverage":""},"18":{"line":"score.prototype = {","coverage":1},"19":{"line":"    addFailure: function (failure) {","coverage":""},"20":{"line":"        return priv.add.apply(this, [ \"failure\", failure ]);","coverage":0},"21":{"line":"    },","coverage":""},"22":{"line":"","coverage":""},"23":{"line":"    addException: function (exception) {","coverage":""},"24":{"line":"        return priv.add.apply(this, [ \"exception\", exception ]);","coverage":0},"25":{"line":"    },","coverage":""},"26":{"line":"","coverage":""},"27":{"line":"    addSkipped: function (exception) {","coverage":""},"28":{"line":"        this.skipped = exception;","coverage":0},"29":{"line":"","coverage":""},"30":{"line":"        return this;","coverage":0},"31":{"line":"    },","coverage":""},"32":{"line":"","coverage":""},"33":{"line":"    setDuration: function (duration) {","coverage":""},"34":{"line":"        this.duration = duration;","coverage":0},"35":{"line":"","coverage":""},"36":{"line":"        return this;","coverage":0},"37":{"line":"    },","coverage":""},"38":{"line":"","coverage":""},"39":{"line":"    setUsage: function (usage) {","coverage":""},"40":{"line":"        this.usage.addFromStat(usage);","coverage":0},"41":{"line":"","coverage":""},"42":{"line":"        return this;","coverage":0},"43":{"line":"    }","coverage":""},"44":{"line":"};","coverage":""},"45":{"line":"","coverage":""}}}],"hits":441,"misses":174,"sloc":615,"instrumentation":"node-jscoverage","coverage":71.70731707317073}